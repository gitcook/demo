<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>IFE JavaScript Task04</title>
    <style>
        body {
            padding: 40px;
        }
        button {
            margin-left: 15px;
            background-color: #fff;
            border-radius: 3px;
            cursor: pointer;
        }
        #main {
            display: table;
            margin: 0 auto;
        }
        #left-out {
            margin-left: 60px;
        }
        ul {
            padding: 0;
        }
        li {
            display: inline-block;
            margin-right: 10px;
            padding: 3px 5px;
            /*width: 30px;*/
            height: 30px;
            background-color: red;
            text-align: center;
            line-height: 30px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div id="main">
    <input type="text" placeholder="请输入数字！" size=30>
    <button id="left-in">左侧入</button>
    <button id="right-in">右侧入</button>
    <button id="left-out">左侧出</button>
    <button id="right-out">右侧出</button>
    <ul id="num"></ul>
</div>
<script type="text/javascript">
    var input = document.getElementsByTagName('input')[0];
    var oUl = document.getElementById('num');

    // 事件代理
    document.getElementById('main').onclick = function () {
        var e = arguments[0] || window.event;
        var target = e.target || e.srcElement;
        if (target.nodeName.toLowerCase() === 'button') {
            if (target.id === 'left-in') {
                addNum(true);
            }
            if (target.id === 'right-in') {
                addNum(false);
            }
            if (target.id === 'left-out') {
                delNum(true);
            }
            if (target.id === 'right-out') {
                delNum(false);
            }
        }
        else if (target.nodeName.toLowerCase() === 'li') {
            oUl.removeChild(target);
        }
    };

    // 判断输入是否为数字
    function isNum(data) {
        var bool = /^[\d\.]+$/.test(data);// 纯数字或小数
        if (bool) {
            return true;
        }
        else if (!data){
            alert("输入不能为空!");
            return false;
        }
        else {
            alert("请输入纯数字!");
            return false;
        }
    }

    // 增加数字，根据switch的值判断left和right
    function addNum(positive) {
        var inputNum = input.value.replace(/\s+/g, ''); // 提前赋值会为空
        if (!isNum(inputNum)) return false; // inputNum 不是数字或者为空函数到此结束
        var li = document.createElement('li');
        li.innerHTML = inputNum;
        if (hasNum(inputNum, oUl)) {;
            if (positive) {
                oUl.insertBefore(li, oUl.childNodes[0]);
            }
            else {
                oUl.appendChild(li);
            }
        }
        else {
            alert("数字已存在!");
        }
    }

    // 删除数字
    /**
     * 删除数字
     * @param  {boolean} positive 确定从左右删除
     * @return {[type]}          [description]
     */
    function delNum(positive) {
        if (oUl.childNodes.length) {
            if (positive) {
                oUl.removeChild(oUl.firstChild);
            }
            else {
                oUl.removeChild(oUl.lastChild);
            }
        }
    }

    // 判断数字是否存在，存在就不加入
    function hasNum(num, ele) {
        var child = ele.childNodes;
        for (var i = 0; i < child.length; i ++) {
            if (child[i].innerHTML === num) return false; // 存在
        }
        return true; // 不存在
    }
</script>
</body>
</html>